<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://openvoiceos.github.io/ovos-technical-manual/401-skill_structure/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Anatomy - OVOS Technical Manual</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Anatomy";
        var mkdocs_page_input_path = "401-skill_structure.md";
        var mkdocs_page_url = "/ovos-technical-manual/401-skill_structure/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> OVOS Technical Manual
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../50-ovos_installer/">ovos-installer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../001-release_channels/">Manual Install</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RaspOVOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../51-install_raspovos/">Tutorial</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../54-skill-examples/">Default Skills</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../55-raspovos_troubleshooting/">Troubleshooting</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Language Support</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../lang_support/">Translations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gitlocalize_tutorial/">GitLocalize Tutorial</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architecture</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../99-architecture-overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../100-bus_service/">Bus</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../101-speech_service/">Listener</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../102-core/">Core</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../399-intents/">Skills and Intents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../103-audio_service/">Audio</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../104-gui_service/">GUI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../340-PHAL/">Platform/Hardware Abstraction Layer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../300-plugin-manager/">Plugin Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../110-config/">Configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Intent Pipelines</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pipelines_overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adapt_pipeline/">Adapt</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../padatious_pipeline/">Padatious</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../m2v_pipeline/">Model2Vec</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../converse_pipeline/">Converse</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../stop_pipeline/">Stop</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../153-persona_pipeline/">Persona</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cq_pipeline/">Common Query</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../631-OCP_pipeline/">OCP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fallback_pipeline/">Fallback</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Transformers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../audio_transformers/">Audio</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../utterance_transformers/">Utterance</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../intent_transformers/">Intents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dialog_transformers/">Dialog</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tts_transformers/">TTS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">AI Agents</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../150-personas/">Personas</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../151-llm-transformers/">AI Transformers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../150-advanced_solvers/">Specialized Solvers</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Self Hosting</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../202-persona_server/">Persona Server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../152-hivemind-agents/">HiveMind</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../200-stt_server/">STT Server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../201-tts_server/">TTS Server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../203-translate_server/">Translate Server</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Skill Development</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../400-skill-design-guidelines/">Design Guidelines</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Anatomy</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#vocab-dialog-and-locale-directories">vocab, dialog, and locale directories</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#initpy">init.py</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#importing-libraries">Importing libraries</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#class-definition">Class definition</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#init">init()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#initialize">initialize()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#intent_handler">@intent_handler</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#stop">stop()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shutdown">shutdown()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#settingsmetayaml">settingsmeta.yaml</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#setuppy">setup.py</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../402-statements/">Dialog</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../403-intents/">Intent Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../405-customization/">Customization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../406-messagebus/">Bus Interaction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../407-skill_filesystem/">Filesystem</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../408-skill_settings/">Skill Settings</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../409-skill_api/">Skill API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../410-skill_runtime_requirements/">Runtime Requirements</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../411-skill_json/">Skill Json</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../420-ssml/">SSML</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../430-skill_dev_faq/">F.A.Q.</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Continuous Conversation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../500-prompts/">Prompts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../501-context/">Follow up Questions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../502-converse/">Converse</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../503-layers/">Intent Layers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../504-session/">Session Aware Skills</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced Skill Types</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../600-fallbacks/">Fallback Skills</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../610-common_query/">Common Query Skills</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../630-OCP_skills/">Media Skills</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../620-universal_skills/">Universal Skills</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">GUI</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../700-homescreen/">Homescreen</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../701-gui_protocol/">Protocol</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../702-ovos-shell/">Shell</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../710-qt5-gui/">QT5 mycroft-gui</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../999-ovos_bigscreen/">Plasma Bigscreen</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Voice Apps</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../590-voice_apps/">Standalone Apps</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../711-qt_voice_apps/">QT Voice Apps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">MessageBus</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../900-bus_client/">Messagebus Client</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../720-skill_gui/">GUI Interface</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../800-mk1_api/">Enclosure Api</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Plugin Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../310-mic_plugins/">Microphone</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../311-vad_plugins/">Voice Activity Detection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../312-wake_word_plugins/">Wake Word</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../313-stt_plugins/">Speech To Text</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../320-tts_plugins/">Text To Speech</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../321-g2p_plugins/">Grapheme to Phoneme</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../330-transformer_plugins/">Transformers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../350-translation_plugins/">Language Detection/Translation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../370-ocp_plugins/">OCP Stream Extractors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../371-media_plugins/">Media Playback</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Misc. Utilities</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../891-number_parser/">Number Parser</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../890-date_parser/">Date Parser</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../893-color_parser/">Color Parser</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../910-quebra_frases/">Quebra Frases</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../920-padacioso/">Padacioso</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../801-mk1_utils/">Mark1 Utils</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Misc. Information</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../002-license/">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../003-timeline/">Timeline</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">OVOS Technical Manual</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Skill Development</li>
      <li class="breadcrumb-item active">Anatomy</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="anatomy-of-a-skill">Anatomy of a Skill</h2>
<h3 id="vocab-dialog-and-locale-directories"><code>vocab</code>, <code>dialog</code>, and <code>locale</code> directories</h3>
<p>The <code>dialog</code>, <code>vocab</code>, and <code>locale</code> directories contain subdirectories for each spoken language the skill supports.
The subdirectories are named using the <a href="https://en.wikipedia.org/wiki/IETF_language_tag">IETF language tag</a> for the
language.
For example, Brazilian Portuguese is 'pt-br', German is 'de-de', and Australian English is 'en-au'.</p>
<p><code>dialog</code> and <code>vocab</code> have been <strong>deprecated</strong>, they are still supported, but we strongly recommend you use <code>locale</code> for new
skills</p>
<p>inside the <code>locale</code> folder you will find subfolders for each language (e.g. <code>en-us</code>), often all you need to do in order
to translate a skill is adding a new folder for your language here</p>
<p>each language folder can have the structure it wants, you may see files grouped by type in subfolder or all in the base
folder</p>
<p>You will find several unfamiliar file extensions in this folder, but these are simple text files</p>
<ul>
<li><code>.dialog</code> files used for defining speech responses</li>
<li><code>.intent</code> files used for defining Padatious Intents</li>
<li><code>.voc</code> files define keywords primarily used in Adapt Intents</li>
<li><code>.entity</code> files define a named entity primarily used in Padatious Intents</li>
</ul>
<h3 id="initpy"><strong>init</strong>.py</h3>
<p>The <code>__init__.py</code> file is where most of the Skill is defined using Python code. </p>
<h4 id="importing-libraries">Importing libraries</h4>
<pre><code class="language-python">from ovos_workshop.intents import IntentBuilder
from ovos_workshop.decorators import intent_handler
from ovos_workshop.skills import OVOSSkill
</code></pre>
<p>This section of code imports the required <em>libraries</em>. Some libraries will be required on every Skill, and your skill
may need to import additional libraries.</p>
<h4 id="class-definition">Class definition</h4>
<p>The <code>class</code> definition extends the <code>OVOSSkill</code> class:</p>
<pre><code class="language-python">class HelloWorldSkill(OVOSSkill):
</code></pre>
<p>The class should be named logically, for example "TimeSkill", "WeatherSkill", "NewsSkill", "IPaddressSkill". If you
would like guidance on what to call your Skill, please join
the <a href="https://matrix.to/#/#openvoiceos-skills:matrix.org">skills Channel on OVOS Chat</a>.</p>
<p>Inside the class, methods are then defined.</p>
<h4 id="init"><strong>init</strong>()</h4>
<p>This method is the <em>constructor</em>. It is called when the Skill is first constructed. It is often used to declare state
variables or perform setup actions, however it cannot fully utilise OVOSSkill methods as the skill is not fully initialized yet at this point. </p>
<p><strong>You usually don't have to include the constructor.</strong></p>
<p>An example <code>__init__</code> method might be:</p>
<pre><code class="language-python">def __init__(self, *args, **kwargs):
    super().__init__(*args, **kwargs)
    self.already_said_hello = False
    self.be_friendly = True


</code></pre>
<p><code>__init__</code> method must accept at least <code>skill_id</code> and <code>bus</code> kwargs and pass them to <code>super()</code>, we recommend passing <code>*args, **kwargs</code> like in example above instead</p>
<p><strong>NOTE</strong>: <code>self.skill_id</code>, <code>self.filesystem</code>, <code>self.settings</code>, <code>self.bus</code> are only available after the call to <code>super()</code>, if you need them consider using <code>initialize</code> instead</p>
<h4 id="initialize">initialize()</h4>
<p>This method is called during <code>__init__</code>, if you implemented <code>__init__</code> in your skill it will be called during <code>super()</code></p>
<p>Perform any final setup needed for the skill here. This function is invoked after the skill is fully constructed and
registered with the system. Intents will be registered and Skill settings will be available.</p>
<p>If you need to access <code>self.skill_id</code>, <code>self.bus</code>, <code>self.settings</code> or <code>self.filesystem</code> you must do it here instead of <code>__init__</code></p>
<pre><code class="language-python">def initialize(self):
    my_setting = self.settings.get('my_setting')
</code></pre>
<h4 id="intent_handler">@intent_handler</h4>
<p>We can use the <code>initialize</code> function to manually register intents, however the <code>@intent_handler</code> decorator is a
cleaner way to achieve this. We will learn all about the different <a href="../intents.md">Intents</a> shortly. </p>
<p>In skills we can see two different intent styles.</p>
<ol>
<li>An Adapt handler, triggered by a keyword defined in a <code>ThankYouKeyword.voc</code> file.</li>
</ol>
<pre><code class="language-python">   @intent_handler(IntentBuilder('ThankYouIntent').require('ThankYouKeyword'))
   def handle_thank_you_intent(self, message):
       self.speak_dialog(&quot;welcome&quot;)
</code></pre>
<ol>
<li>A Padatious intent handler, triggered using a list of sample phrases.</li>
</ol>
<pre><code class="language-python">   @intent_handler('HowAreYou.intent')
   def handle_how_are_you_intent(self, message):
       self.speak_dialog(&quot;how.are.you&quot;)
</code></pre>
<p>In both cases, the function receives two <em>parameters</em>:</p>
<ul>
<li><code>self</code> - a reference to the HelloWorldSkill object itself</li>
<li><code>message</code> - an incoming message from the <code>messagebus</code>.</li>
</ul>
<p>Both intents call the <code>self.speak_dialog()</code> method, passing the name of a dialog file to it. In this
case <code>welcome.dialog</code> and <code>how.are.you.dialog</code>.</p>
<h4 id="stop">stop()</h4>
<p>You will usually also have a <code>stop()</code> method.</p>
<p>The <code>stop</code> method is called anytime a User says "Stop" or a similar command. It is useful for stopping any output or process that a User might want to end without needing to issue a Skill specific utterance such as media playback or an expired alarm notification.</p>
<p>In the following example, we call a method <code>stop_beeping</code> to end a notification that our Skill has created.</p>
<p>If the skill "consumed" the stop signal it should return True, else return False. </p>
<pre><code class="language-python">    def stop(self):
        if self.beeping:
            self.stop_beeping()
            return True
        return False
</code></pre>
<p>If a Skill has any active functionality, the stop() method should terminate the functionality, leaving the Skill in a known good state.</p>
<p>When the skill returns True no other skill will be stopped, when it returns False the next active skill will attempt to stop and so on until something consumes the stop signal</p>
<h4 id="shutdown">shutdown()</h4>
<p>The <code>shutdown</code> method is called during the Skill process termination. 
It is used to perform any final actions to ensure all processes and operations in execution are stopped safely. 
This might be particularly useful for Skills that have scheduled future events, may be writing to a file or database, or that have initiated new processes.</p>
<p>In the following example we cancel a scheduled event and call a method in our Skill to stop a subprocess we initiated.</p>
<pre><code class="language-python">    def shutdown(self):
        self.cancel_scheduled_event('my_event')
        self.stop_my_subprocess()
</code></pre>
<h3 id="settingsmetayaml">settingsmeta.yaml</h3>
<p>This file defines the settings UI that will be available to a User through a backend or companion app</p>
<p>Jump to <a href="skill-settings.md">Skill Settings</a> for more information on this file and handling of Skill settings.</p>
<h3 id="setuppy">setup.py</h3>
<p>This file allows a skill to be installed just like any other python package. This means you can publish your skill on pypi or favorite package manager and use it as a dependency</p>
<p>A typical setup.py file looks like this</p>
<pre><code class="language-python">#!/usr/bin/env python3
from setuptools import setup
import os
from os import walk, path


# TODO update this info!
# Define package information
SKILL_CLAZZ = &quot;MySkill&quot;  # Make sure it matches __init__.py class name
VERSION = &quot;0.0.1&quot;
URL = &quot;https://github.com/authorName/ovos-skill-name&quot;
AUTHOR = &quot;authorName&quot;
EMAIL = &quot;&quot;
LICENSE = &quot;Apache2.0&quot;
DESCRIPTION = &quot;a skill for OVOS&quot;

PYPI_NAME = URL.split(&quot;/&quot;)[-1]  # pip install PYPI_NAME

# Construct entry point for plugin
SKILL_ID = f&quot;{PYPI_NAME.lower()}.{AUTHOR.lower()}&quot;
SKILL_PKG = PYPI_NAME.lower().replace('-', '_')
PLUGIN_ENTRY_POINT = f&quot;{SKILL_ID}={SKILL_PKG}:{SKILL_CLAZZ}&quot;


def get_requirements(requirements_filename: str):
    &quot;&quot;&quot;
    Parse requirements from a file.

    Args:
        requirements_filename (str, optional): The filename of the requirements file.
            Defaults to &quot;requirements.txt&quot;.

    Returns:
        List[str]: A list of parsed requirements.

    Notes:
        If the environment variable MYCROFT_LOOSE_REQUIREMENTS is set, this function
        will modify the parsed requirements to use loose version requirements,
        replacing '==' with '&gt;=' and '~=' with '&gt;='.

    &quot;&quot;&quot;
    requirements_file = path.join(path.abspath(path.dirname(__file__)),
                                  requirements_filename)
    with open(requirements_file, 'r', encoding='utf-8') as r:
        requirements = r.readlines()
    requirements = [r.strip() for r in requirements if r.strip()
                    and not r.strip().startswith(&quot;#&quot;)]
    if 'MYCROFT_LOOSE_REQUIREMENTS' in os.environ:
        print('USING LOOSE REQUIREMENTS!')
        requirements = [r.replace('==', '&gt;=').replace('~=', '&gt;=') for r in requirements]
    return requirements


def find_resource_files():
    &quot;&quot;&quot;ensure all non-code resource files are included in the package&quot;&quot;&quot;
    # add any folder with files your skill uses here! 
    resource_base_dirs = (&quot;locale&quot;, &quot;ui&quot;, &quot;vocab&quot;, &quot;dialog&quot;, &quot;regex&quot;)
    base_dir = path.dirname(__file__)
    package_data = [&quot;*.json&quot;]
    for res in resource_base_dirs:
        if path.isdir(path.join(base_dir, res)):
            for (directory, _, files) in walk(path.join(base_dir, res)):
                if files:
                    package_data.append(
                        path.join(directory.replace(base_dir, &quot;&quot;).lstrip('/'),
                                  '*'))
    return package_data


# Setup configuration
setup(
    name=PYPI_NAME,
    version=VERSION,
    description=DESCRIPTION,
    url=URL,
    author=AUTHOR,
    author_email=EMAIL,
    license=LICENSE,
    package_dir={SKILL_PKG: &quot;&quot;},
    package_data={SKILL_PKG: find_resource_files()},
    packages=[SKILL_PKG],
    include_package_data=True,
    install_requires=get_requirements(&quot;requirements.txt&quot;),
    keywords='ovos skill plugin',
    entry_points={'ovos.plugin.skill': PLUGIN_ENTRY_POINT}
)
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../400-skill-design-guidelines/" class="btn btn-neutral float-left" title="Design Guidelines"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../402-statements/" class="btn btn-neutral float-right" title="Dialog">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../400-skill-design-guidelines/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../402-statements/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
